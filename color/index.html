<html lang="zh-CN">

<head>
    <title>自由调色板 - XTSGAMES</title>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/css/global.css" />
    <link rel="stylesheet" media="not (hover: hover)" href="/css/mobile.css" />
    <link rel="stylesheet" media="only screen and (hover: hover)" href="/css/desktop.css" />
    <style>
        .mainBody {
            background-color: #888888;
            transition: background-color 0.5s var(--transit);
        }

        input[type="range"] {
            width: 256px;
            height: 8px;
        }

        #colorBlock {
            width: 500px;
            height: 500px;
            background-color: #000000;
        }
    </style>
    <script src="/xts-functions.js"></script>
</head>

<body id="body"><div class="mainBody">
    <div class="title">
        <h1>自由调色板</h1>
    </div>
    <div class="navigation">
        <h6><a href="../">XTSGAMES.TOP</a> &gt; <strong>自由调色板</strong></h6>
    </div>
    <div class="content">
        <h3 id="choose-rgb">RGB | <span onclick="turn('cmyk')" class="LNK">CMYK</span> | <span onclick="turn('hsv')" class="LNK">HSV</span> | <span onclick="turn('hsl')" class="LNK">HSL</span></h3>
        <h3 id="choose-cmyk" hide><span onclick="turn('rgb')" class="LNK">RGB</span> | CMYK | <span onclick="turn('hsv')" class="LNK">HSV</span> | <span onclick="turn('hsl')" class="LNK">HSL</span></h3>
        <h3 id="choose-hsv" hide><span onclick="turn('rgb')" class="LNK">RGB</span> | <span onclick="turn('cmyk')" class="LNK">CMYK</span> | HSV | <span onclick="turn('hsl')" class="LNK">HSL</span></h3>
        <h3 id="choose-hsl" hide><span onclick="turn('rgb')" class="LNK">RGB</span> | <span onclick="turn('cmyk')" class="LNK">CMYK</span> | <span onclick="turn('hsv')" class="LNK">HSV</span> | HSL</h3>

        <table id="adjust-rgb">
            <tr>
                <th style="color: #ff0000;">R / 红, Red</th>
                <th><input id="rgb-r" type="range" min="0" max="255" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="rgb-r-value" style="color: #000000;">0 / 00</span></th>
            </tr>
            <tr>
                <th style="color: #00ff00;">G / 绿, Green</th>
                <th><input id="rgb-g" type="range" min="0" max="255" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="rgb-g-value" style="color: #000000;">0 / 00</span></th>
            </tr>
            <tr>
                <th style="color: #0000ff;">B / 蓝, Blue</th>
                <th><input id="rgb-b" type="range" min="0" max="255" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="rgb-b-value" style="color: #000000;">0 / 00</span></th>
            </tr>
        </table>

        <table id="adjust-cmyk" hide>
            <tr>
                <th style="color: #00ffff;">C / 青, Cyan</th>
                <th><input id="cmyk-c" type="range" min="0" max="100" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="cmyk-c-value" style="color: #ffffff;">0</span></th>
            </tr>
            <tr>
                <th style="color: #ff00ff;">M / 品红, Magenta</th>
                <th><input id="cmyk-m" type="range" min="0" max="100" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="cmyk-m-value" style="color: #ffffff;">0</span></th>
            </tr>
            <tr>
                <th style="color: #ffff00;">Y / 黄, Yellow</th>
                <th><input id="cmyk-y" type="range" min="0" max="100" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="cmyk-y-value" style="color: #ffffff;">0</span></th>
            </tr>
            <tr>
                <th style="color: #000000;">K / 黑, Key</th>
                <th><input id="cmyk-k" type="range" min="0" max="100" step="1" value="100" oninput="changeColor()" /></th>
                <th><span id="cmyk-k-value" style="color: #000000;">1</span></th>
            </tr>
        </table>

        <table id="adjust-hsv" hide>
            <tr>
                <th style="background: linear-gradient(to right, #ff0000, #ff0000, #ffff00, #00ff00, #0000ff, #ff00ff, #ff00ff); background-clip: text; color: transparent;">H / 色相, Hue</th>
                <th><input id="hsv-h" type="range" min="0" max="359" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="hsv-h-value" style="color: #ff0000;">0°</span></th>
            </tr>
            <tr>
                <th style="background: linear-gradient(to right, #cccccc, #00ffff); background-clip: text; color: transparent;">S / 饱和度, Saturation</th>
                <th><input id="hsv-s" type="range" min="0" max="100" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="hsv-s-value" style="color: #cccccc;">0</span></th>
            </tr>
            <tr>
                <th style="background: linear-gradient(to right, #000000, #00ffff); background-clip: text; color: transparent;">V / 明度, Value</th>
                <th><input id="hsv-v" type="range" min="0" max="100" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="hsv-v-value" style="color: #000000;">0</span></th>
            </tr>
        </table>

        <table id="adjust-hsl" hide>
            <tr>
                <th style="background: linear-gradient(to right, #ff0000, #ff0000, #ffff00, #00ff00, #0000ff, #ff00ff, #ff00ff); background-clip: text; color: transparent;">H / 色相, Hue</th>
                <th><input id="hsl-h" type="range" min="0" max="359" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="hsl-h-value" style="color: #ff0000;">0°</span></th>
            </tr>
            <tr>
                <th style="background: linear-gradient(to right, #cccccc, #00ffff); background-clip: text; color: transparent;">S / 饱和度, Saturation</th>
                <th><input id="hsl-s" type="range" min="0" max="100" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="hsl-s-value" style="color: #cccccc;">0</span></th>
            </tr>
            <tr>
                <th style="background: linear-gradient(to right, #000000, #ffffff); background-clip: text; color: transparent;">L / 亮度, Lightness</th>
                <th><input id="hsl-l" type="range" min="0" max="100" step="1" value="0" oninput="changeColor()" /></th>
                <th><span id="hsl-l-value" style="color: #000000;">0</span></th>
            </tr>
        </table>
        
        <br />
        <div id="colorBlock" style="float: left; margin-right: 16px;"></div>
        <img id="img-rgb" src="rgb.png" width="200" />
        <img id="img-cmyk" src="cmyk.png" width="200" hide />
        <img id="img-hsv" src="hsv.png" width="200" hide />
        <img id="img-hsl" src="hsl.png" width="200" hide />
        <table>
            <tr><th id="code-rgb" style="color: #000000;">rgb(0, 0, 0) / #000000</th></tr>
            <tr><th id="code-cmyk" style="color: #000000;">cmyk(0, 0, 0, 100)</th></tr>
            <tr><th id="code-hsv" style="color: #000000;">hsv(0, 0, 0)</th></tr>
            <tr><th id="code-hsl" style="color: #000000;">hsv(0, 0, 0)</th></tr>
        </table>
        
    </div>
    <script>
        seizure("当你快速滑动本页面上的滚动条时，页面的<strong>布局颜色可能会快速改变</strong>。", "When you quickly swipe the scroll bar on this page, <strong>the layout color of the page may change quickly</strong>.");

        function turn(colorspace) {
            const targets = ["choose", "adjust", "img"];
            const spaces = ["rgb", "cmyk", "hsv", "hsl"];

            targets.forEach(target => {
                spaces.forEach(space => {
                    colorspace == space ? unhide(`${target}-${space}`) : hide(`${target}-${space}`);
                })
            });
        }

        function changeColor() {
            let nowControlling;

            let rgb = { r: undefined, g: undefined, b: undefined };
            let cmyk = { c: undefined, m: undefined, y: undefined, k: undefined };
            let hsv = { h: undefined, s: undefined, v: undefined };
            let hsl = { h: undefined, s: undefined, l: undefined };

            if (!isHidden("choose-rgb")) { nowControlling = "RGB"; }
            if (!isHidden("choose-cmyk")) { nowControlling = "CMYK"; }
            if (!isHidden("choose-hsv")) { nowControlling = "HSV"; }
            if (!isHidden("choose-hsl")) { nowControlling = "HSL"; }

            if (nowControlling == "RGB") {
                rgb.r = +copyValue("rgb-r");
                rgb.g = +copyValue("rgb-g");
                rgb.b = +copyValue("rgb-b");

                cmyk = RGB2CMYK(rgb.r, rgb.g, rgb.b);
                hsv = RGB2HSV(rgb.r, rgb.g, rgb.b);
                hsl = RGB2HSL(rgb.r, rgb.g, rgb.b);
            }
            if (nowControlling == "CMYK") {
                cmyk.c = +copyValue("cmyk-c");
                cmyk.m = +copyValue("cmyk-m");
                cmyk.y = +copyValue("cmyk-y");
                cmyk.k = +copyValue("cmyk-k");

                rgb = CMYK2RGB(cmyk.c, cmyk.m, cmyk.y, cmyk.k);
                hsv = RGB2HSV(rgb.r, rgb.g, rgb.b);
                hsl = RGB2HSL(rgb.r, rgb.g, rgb.b);
            }
            if (nowControlling == "HSV") {
                hsv.h = +copyValue("hsv-h");
                hsv.s = +copyValue("hsv-s");
                hsv.v = +copyValue("hsv-v");

                rgb = HSV2RGB(hsv.h, hsv.s, hsv.v);
                cmyk = RGB2CMYK(rgb.r, rgb.g, rgb.b);
                hsl = RGB2HSL(rgb.r, rgb.g, rgb.b);
            }
            if (nowControlling == "HSL") {
                hsl.h = +copyValue("hsl-h");
                hsl.s = +copyValue("hsl-s");
                hsl.l = +copyValue("hsl-l");

                rgb = HSL2RGB(hsl.h, hsl.s, hsl.l);
                cmyk = RGB2CMYK(rgb.r, rgb.g, rgb.b);
                hsv = RGB2HSV(rgb.r, rgb.g, rgb.b);
            }

            // Formative
            rgb.r = parseInt(rgb.r);
            rgb.g = parseInt(rgb.g);
            rgb.b = parseInt(rgb.b);
            cmyk.c = parseInt(cmyk.c);
            cmyk.m = parseInt(cmyk.m);
            cmyk.y = parseInt(cmyk.y);
            cmyk.k = parseInt(cmyk.k);
            hsv.h = parseInt(hsv.h);
            hsv.s = parseInt(hsv.s);
            hsv.v = parseInt(hsv.v);
            hsl.h = parseInt(hsl.h);
            hsl.s = parseInt(hsl.s);
            hsl.l = parseInt(hsl.l);

            if (hsv.h == 360) { hsv.h = 0; }
            if (hsl.h == 360) { hsl.h = 0; }
            
            // Paint ColorBlock
            styleTo("colorBlock", `background-color: rgb(${rgb.r}, ${rgb.g}, ${rgb.b}); float: left; margin-right: 16px;`);
            // styleTo("mainBody", `background-color: rgb(${255 - rgb.r}, ${255 - rgb.g}, ${255 - rgb.b});`, "class");

            if (rgb.r >= 116 && rgb.r <= 156 && rgb.g >= 116 && rgb.g <= 156 && rgb.b >= 116 && rgb.b <= 156) {
                styleTo("mainBody", `background-color: #222222;`, "class");
            } else {
                styleTo("mainBody", `background-color: #888888;`, "class");
            }

            // Update everyone's color

            // RGB
            target("rgb-r").value = rgb.r;
            target("rgb-g").value = rgb.g;
            target("rgb-b").value = rgb.b;

            copyTo("rgb-r-value", `${rgb.r} / ${rgb.r.toString(16).length < 2 ? "0" + rgb.r.toString(16).toUpperCase() : rgb.r.toString(16).toUpperCase()}`);
            copyTo("rgb-g-value", `${rgb.g} / ${rgb.g.toString(16).length < 2 ? "0" + rgb.g.toString(16).toUpperCase() : rgb.g.toString(16).toUpperCase()}`);
            copyTo("rgb-b-value", `${rgb.b} / ${rgb.b.toString(16).length < 2 ? "0" + rgb.b.toString(16).toUpperCase() : rgb.b.toString(16).toUpperCase()}`);
            copyTo("code-rgb", `rgb(${rgb.r}, ${rgb.g}, ${rgb.b}) / #${rgb.r.toString(16).length < 2 ? "0" + rgb.r.toString(16).toUpperCase() : rgb.r.toString(16).toUpperCase()}${rgb.g.toString(16).length < 2 ? "0" + rgb.g.toString(16).toUpperCase() : rgb.g.toString(16).toUpperCase()}${rgb.b.toString(16).length < 2 ? "0" + rgb.b.toString(16).toUpperCase() : rgb.b.toString(16).toUpperCase()}`);

            colorTo("rgb-r-value", `rgb(${rgb.r}, 0, 0)`);
            colorTo("rgb-g-value", `rgb(0, ${rgb.g}, 0)`);
            colorTo("rgb-b-value", `rgb(0, 0, ${rgb.b})`);
            colorTo("code-rgb", `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`);

            // CMYK
            target("cmyk-c").value = cmyk.c;
            target("cmyk-m").value = cmyk.m;
            target("cmyk-y").value = cmyk.y;
            target("cmyk-k").value = cmyk.k;

            copyTo("cmyk-c-value", cmyk.c);
            copyTo("cmyk-m-value", cmyk.m);
            copyTo("cmyk-y-value", cmyk.y);
            copyTo("cmyk-k-value", cmyk.k);
            copyTo("code-cmyk", `cmyk(${cmyk.c}, ${cmyk.m}, ${cmyk.y}, ${cmyk.k})`);

            colorTo("cmyk-c-value", `rgb(${CMYK2RGB(cmyk.c, 0, 0, 0)["r"]}, ${CMYK2RGB(cmyk.c, 0, 0, 0)["g"]}, ${CMYK2RGB(cmyk.c, 0, 0, 0)["b"]})`);
            colorTo("cmyk-m-value", `rgb(${CMYK2RGB(0, cmyk.m, 0, 0)["r"]}, ${CMYK2RGB(0, cmyk.m, 0, 0)["g"]}, ${CMYK2RGB(0, cmyk.m, 0, 0)["b"]})`);
            colorTo("cmyk-y-value", `rgb(${CMYK2RGB(0, 0, cmyk.y, 0)["r"]}, ${CMYK2RGB(0, 0, cmyk.y, 0)["g"]}, ${CMYK2RGB(0, 0, cmyk.y, 0)["b"]})`);
            colorTo("cmyk-k-value", `rgb(${CMYK2RGB(0, 0, 0, cmyk.k)["r"]}, ${CMYK2RGB(0, 0, 0, cmyk.k)["g"]}, ${CMYK2RGB(0, 0, 0, cmyk.k)["b"]})`);
            colorTo("code-cmyk", `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`);

            // HSV
            target("hsv-h").value = hsv.h;
            target("hsv-s").value = hsv.s;
            target("hsv-v").value = hsv.v;

            copyTo("hsv-h-value", `${hsv.h}°`);
            copyTo("hsv-s-value", hsv.s);
            copyTo("hsv-v-value", hsv.v);
            copyTo("code-hsv", `hsv(${hsv.h}, ${hsv.s}, ${hsv.v})`);

            colorTo("hsv-h-value", `rgb(${HSV2RGB(hsv.h, 100, 100)["r"]}, ${HSV2RGB(hsv.h, 100, 100)["g"]}, ${HSV2RGB(hsv.h, 100, 100)["b"]})`);
            colorTo("hsv-s-value", `rgb(${(hsv.s / 100).transit(204, 0)}, ${(hsv.s / 100).transit(204, 255)}, ${(hsv.s / 100).transit(204, 255)})`);
            colorTo("hsv-v-value", `rgb(0, ${(hsv.v / 100).transit(0, 255)}, ${(hsv.v / 100).transit(0, 255)})`);
            colorTo("code-hsv", `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`);

            // hsl
            target("hsl-h").value = hsl.h;
            target("hsl-s").value = hsl.s;
            target("hsl-l").value = hsl.l;

            copyTo("hsl-h-value", `${hsl.h}°`);
            copyTo("hsl-s-value", hsl.s);
            copyTo("hsl-l-value", hsl.l);
            copyTo("code-hsl", `hsl(${hsl.h}, ${hsl.s}, ${hsl.l})`);

            colorTo("hsl-h-value", `rgb(${HSL2RGB(hsl.h, 100, 50)["r"]}, ${HSL2RGB(hsl.h, 100, 50)["g"]}, ${HSL2RGB(hsl.h, 100, 50)["b"]})`);
            colorTo("hsl-s-value", `rgb(${(hsl.s / 100).transit(204, 0)}, ${(hsl.s / 100).transit(204, 255)}, ${(hsl.s / 100).transit(204, 255)})`);
            colorTo("hsl-l-value", `rgb(${(hsl.l / 100).transit(0, 255)}, ${(hsl.l / 100).transit(0, 255)}, ${(hsl.l / 100).transit(0, 255)})`);
            colorTo("code-hsl", `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`);
        }

        function RGB2CMYK(r, g, b) {
            if (r == 0 && g == 0 && b == 0) {
                return { c: 0, m: 0, y: 0, k: 100 };
            }

            // Convert RGB to range [0, 1]
            let rPrime = r / 255;
            let gPrime = g / 255;
            let bPrime = b / 255;

            // Calculate K (black key)
            let k = 1 - Math.max(rPrime, gPrime, bPrime);

            // Calculate CMY values
            let c = (1 - rPrime - k) / (1 - k);
            let m = (1 - gPrime - k) / (1 - k);
            let y = (1 - bPrime - k) / (1 - k);

            // Return CMYK values in the range [0, 100]
            return { c: c * 100, m: m * 100, y: y * 100, k: k * 100 };
        }

        function CMYK2RGB(c, m, y, k) {
            // Convert CMYK to RGB in range [0, 255]
            let r = 255 * (100 - c) * (100 - k) / 10000;
            let g = 255 * (100 - m) * (100 - k) / 10000;
            let b = 255 * (100 - y) * (100 - k) / 10000;

            // Round and ensure the values are within the range [0, 255]
            r = Math.round(r);
            g = Math.round(g);
            b = Math.round(b);

            return { r: r, g: g, b: b };
        }

        function RGB2HSV(r, g, b) {
            // Convert RGB to the range [0, 1]
            let rPrime = r / 255;
            let gPrime = g / 255;
            let bPrime = b / 255;

            let max = Math.max(rPrime, gPrime, bPrime);
            let min = Math.min(rPrime, gPrime, bPrime);
            let delta = max - min;

            let h, s, v = max;

            if (delta === 0) {
                h = 0; // If the color is a shade of grey
            } else if (max === rPrime) {
                h = ((gPrime - bPrime) / delta) % 6;
            } else if (max === gPrime) {
                h = ((bPrime - rPrime) / delta) + 2;
            } else {
                h = ((rPrime - gPrime) / delta) + 4;
            }

            h = Math.round(h * 60);
            if (h < 0) h += 360;

            s = max === 0 ? 0 : delta / max;
            s = Math.round(s * 100);
            v = Math.round(v * 100);

            return { h: h, s: s, v: v };
        }

        function HSV2RGB(h, s, v) {
            // Convert s and v to the range [0, 1]
            s /= 100;
            v /= 100;

            let c = v * s; // Chroma
            let x = c * (1 - Math.abs((h / 60) % 2 - 1));
            let m = v - c;

            let rPrime, gPrime, bPrime;

            if (0 <= h && h < 60) {
                rPrime = c;
                gPrime = x;
                bPrime = 0;
            } else if (60 <= h && h < 120) {
                rPrime = x;
                gPrime = c;
                bPrime = 0;
            } else if (120 <= h && h < 180) {
                rPrime = 0;
                gPrime = c;
                bPrime = x;
            } else if (180 <= h && h < 240) {
                rPrime = 0;
                gPrime = x;
                bPrime = c;
            } else if (240 <= h && h < 300) {
                rPrime = x;
                gPrime = 0;
                bPrime = c;
            } else {
                rPrime = c;
                gPrime = 0;
                bPrime = x;
            }

            let r = Math.round((rPrime + m) * 255);
            let g = Math.round((gPrime + m) * 255);
            let b = Math.round((bPrime + m) * 255);

            return { r: r, g: g, b: b };
        }

        function RGB2HSL(r, g, b) {
            // Convert RGB to the range [0, 1]
            r /= 255;
            g /= 255;
            b /= 255;

            let max = Math.max(r, g, b);
            let min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0; // achromatic
            } else {
                let d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

                if (max == r) {
                    h = (g - b) / d + (g < b ? 6 : 0);
                }
                if (max == g) {
                    h = (b - r) / d + 2;
                }
                if (max == b) {
                    h = (r - g) / d + 4;
                }

                h /= 6;
            }

            h = Math.round(h * 360);
            s = Math.round(s * 100);
            l = Math.round(l * 100);

            return { h: h, s: s, l: l };
        }

        function HSL2RGB(h, s, l) {
            // Convert s and l from percentage to the range [0, 1]
            s /= 100;
            l /= 100;

            let r, g, b;

            if (s === 0) {
                r = g = b = l; // Achromatic
            } else {
                const hueToRgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1 / 6) return p + (q - p) * 6 * t;
                    if (t < 1 / 2) return q;
                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                    return p;
                };

                let q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                let p = 2 * l - q;

                r = hueToRgb(p, q, h / 360 + 1 / 3);
                g = hueToRgb(p, q, h / 360);
                b = hueToRgb(p, q, h / 360 - 1 / 3);
            }

            r = Math.round(r * 255);
            g = Math.round(g * 255);
            b = Math.round(b * 255);

            return { r: r, g: g, b: b };
        }
    </script>
</div></body>

</html>