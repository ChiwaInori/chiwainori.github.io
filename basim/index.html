<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <title>蔚蓝档案 抽卡模拟器 - ChiwaInori.top</title>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/css/global.css" />
    <link rel="stylesheet" href="/css/type-normal.css" />
    <style>
        img {
            border: 0px;
        }

        th {
            font-size: 40px;
        }
    </style>
    <script src="/inori-functions.js"></script>
</head>

<body><div class="mainBody">
    <div class="title">
        <h1>蔚蓝档案 抽卡模拟器</h1>
    </div>
    <div class="navigation">
        <h6><a href="../">ChiwaInori.top</a> &gt; <strong>蔚蓝档案 抽卡模拟器</strong></h6>
    </div>
        <div class="IFB-Yellow"><p><strong>此页的内容已过时</strong></p><p>这表示此页的内容可能已经不符合目前情况,</p><p>并且可能不会马上进行更新.</p><p>请从其他方式获取相关的最新内容.</p></div>
        <br />
        <h4>此网页以蔚蓝档案日服 (ブルーアーカイブ) 为基准制作。</h4>
        <h4 style="margin-bottom: 0px;">版本: 291158 (安守 ミノリ、間宵 シグレ (温泉))</h4>
        <h6>上次更新: 2024.8.16</h6>
        <br />
        <p><select id="group">
            <option value="normal">通常募集</option>
            <option value="minori">工務の道も一步から (ミノリ 复刻)</option>
            <option value="shigureHotSpring">ステアミルクは湯けむりと共に (シグレ (温泉) 复刻)</option>
            <option value="meru">ペンは銃より強し! (モミジ, メル 复刻)</option>
            <option value="cherino">晴れのち失脚所により大荒れ (チェリノ 复刻)</option>
            <option value="marina">忠言, 耳に空撃 (マリナ 复刻)</option>
        </select></p>
        <img id="banner" src="banners/" hidden />
        <br />
        <img src="roll1.png" onclick="roll(1)" height="40" />
        <img src="roll10.png" onclick="roll(10)" height="40" />
        <br /><br />
        <p id="summary1" style="display: block;"><strong>- 统计 -</strong></p>
        <p id="summary2" style="display: block;"><strong>已用青辉石: <span id="usedStones" style="color: #00ddff;">0</span> (<span id="rollTimes">0</span> 次)</strong></p>
        <p id="summary3" style="display: block;"><strong>抽卡小计: <span id="star3out" style="color: #e050f0;">0</span>&nbsp;/&nbsp;<span id="star2out" style="color: #ffc800;">0</span>&nbsp;/&nbsp;<span id="star1out" style="color: #00a8ff;">0</span></strong></p>
        <p id="summary4" style="display: block;"><strong>概率统计: <span id="star3outChance" style="color: #e050f0;">0</span><span style="color: #e050f0;">%</span>&nbsp;/&nbsp;<span id="star2outChance" style="color: #ffc800;">0</span><span style="color: #ffc800;">%</span>&nbsp;/&nbsp;<span id="star1outChance" style="color: #00a8ff;">0</span><span style="color: #00a8ff;">%</span></strong> (参考值: 3% / 18.5% / 78.5%)</p>
        <br />
        <table>
            <tr>
                <th><img id="img1" src="" height="32" /></th>
                <th id="result1"></th>
                <th class="more">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                <th class="more"><img id="img6" src="" height="32" /></th>
                <th class="more" id="result6"></th>
            </tr>
            <tr>
                <th class="more"><img id="img2" src="" height="32" /></th>
                <th class="more" id="result2"></th>
                <th class="more">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                <th class="more"><img id="img7" src="" height="32" /></th>
                <th class="more" id="result7"></th>
            </tr>
            <tr>
                <th class="more"><img id="img3" src="" height="32" /></th>
                <th class="more" id="result3"></th>
                <th class="more">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                <th class="more"><img id="img8" src="" height="32" /></th>
                <th class="more" id="result8"></th>
            </tr>
            <tr>
                <th class="more"><img id="img4" src="" height="32" /></th>
                <th class="more" id="result4"></th>
                <th class="more">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                <th class="more"><img id="img9" src="" height="32" /></th>
                <th class="more" id="result9"></th>
            </tr>
            <tr>
                <th class="more"><img id="img5" src="" height="32" /></th>
                <th class="more" id="result5"></th>
                <th class="more">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                <th class="more"><img id="img10" src="" height="32" /></th>
                <th class="more" id="result10"></th>
            </tr>
        </table>
        <p class="ANT">学生图片从 <a href="https://bluearchive.wiki/" target="_blank">https://bluearchive.wiki/</a> 获取。</p>
    </div>
    <script>
        const star1 = ["チナツ", "ハルカ", "ジュリ", "コタマ", "アスナ", "コトリ", "フィーナ", "スズミ", "シミコ", "セリナ", "ヨシミ"];
        const star2 = ["アカリ", "ジュンコ", "ムツキ", "カヨコ", "フウカ", "ユウカ", "アカネ", "ハレ", "ウタハ", "チセ", "ツバキ", "セリカ", "アヤネ", "ハスミ", "ハナエ", "アイリ", "シズコ", "モモイ", "ハナコ", "キリノ", "マリー", "モミジ"];
        const star3 = ["ヒナ", "イオリ", "ハルナ", "イズミ", "アル", "スミレ", "エイミ", "カリン", "ネル", "マキ", "ヒビキ", "サヤ", "シュン", "シロコ", "ホシノ", "ヒフミ", "ツルギ", "マシロ", "イズナ", "アリス", "ミドリ", "チェリノ", "ユズ", "アズサ", "コハル", "ヒフミ (水着)", "シロコ (ライディング)", "シュン (幼女)", "サヤ (私服)", "アスナ (バニーガール)", "ナツ", "アコ", "チェリノ (温泉)", "チナツ (温泉)", "ノドカ (温泉)", "セリカ (正月)", "セナ", "チヒロ", "ミモリ", "ウイ", "ヒナタ", "マリナ", "ミヤコ", "サキ", "ミユ", "カエデ", "イロハ", "ツクヨ", "ミサキ", "ヒヨリ", "アツコ", "ワカモ (水着)", "ノノミ (水着)", "サオリ", "モエ", "カズサ", "ココナ", "ウタハ (応援団)", "ノア", "アカネ (バニーガール)", "ヒマリ", "シグレ", "セリナ (クリスマス)", "ハナエ (クリスマス)", "ミネ", "メグ", "カンナ", "サクラコ", "コユキ", "カヨコ (正月)", "ハルカ (正月)", "カホ", "アリス (メイド)", "トキ (バニーガール)", "レイサ", "ルミ", "ミナ", "ミノリ", "ミヤコ (水着)", "サキ (水着)", "シロコ (水着)", "ミモリ (水着)", "メル", "コトリ (応援団)", "ハルナ (体操服)", "イチカ", "カスミ", "シグレ (温泉)", "ユカリ", "レンゲ", "キキョウ", "エイミ (水着)", "ハレ (キャンプ)", "コタマ (キャンプ)", "アル (ドレス)", "カヨコ (ドレス)", "アカリ (正月)", "ツバキ (ガイド)", "ウミカ", "キララ", "モモイ (メイド)", "ミドリ (メイド)", "セリカ (水着)", "カンナ (水着)", "フブキ (水着)", "モエ (水着)"];

        let usedStones = 0;
        let rollTimes = 0;
        let star1out = 0;
        let star2out = 0;
        let star3out = 0;

        target("group").addEventListener("change", function () {
            const banners = ["minori", "20240814_01", "shigureHotSpring", "20240814_02", "meru", "20240807_01", "cherino", "20230419_01", "marina", "20230419_02"];
            const index = banners.indexOf(this.value);

            if (index >= 0) {
                unhide("banner");
                target("banner").src = `banners/300px-Lobby_Banner_${banners[index + 1]}.webp`;
            } else {
                hide("banner");
            }
        });
        
        function roll(times) {
            if (times == 1) {
                hide("more", "class");
            } else {
                unhide("more", "table-cell", "class");
            }

            for (let i = 1; i <= times; i++) {
                rollTimes++;
                usedStones += 120;

                let d;
                let pickup = false;

                if (i != 10) {
                    d = rand(0, 1, true);
                } else {
                    d = rand(0, 0.185 + 0.03, true);
                }

                let jpnName;

                if (target("group").value != "normal" && d <= 0.007) { // Special
                    jpnName = getSpecial(target("group").value);
                    colorTo(`result${i}`, "#e050f0");
                    star3out++;
                    pickup = true;
                } else if (d <= 0.03) { // Star3
                    jpnName = target("group").value == "normal" ? star3[rand(0, star3.length - 1)] : star3.remove(getSpecial(target("group").value))[rand(0, star3.length - 2)];
                    colorTo(`result${i}`, "#e050f0");
                    star3out++;
                } else if (d <= 0.185 + 0.03) { // Star2
                    jpnName = star2[rand(0, star2.length - 1)];
                    colorTo(`result${i}`, "#ffc800");
                    star2out++;
                } else { // Star1
                    jpnName = star1[rand(0, star1.length - 1)];
                    colorTo(`result${i}`, "#00a8ff");
                    star1out++;
                }
                copyTo(`result${i}`, jpnName);

                const engName = getEngName(jpnName);
                target(`img${i}`).src = `images/266px-${engName}.webp`;

                if (pickup) {
                    addTo(`result${i}`, " <span style='font-size:24px; color: #e050f0;'>(PICKUP!)</span>");
                }
            }

            updateData();
        }

        function getSpecial(name) {
            if (name == "minori") { return "ミノリ"; }
            if (name == "shigureHotSpring") { return "シグレ (温泉)"; }
            if (name == "meru") { return "メル"; }
            if (name == "cherino") { return "チェリノ"; }
            if (name == "marina") { return "マリナ"; }
        }

        function updateData() {
            const total = star1out + star2out + star3out;

            copyTo("usedStones", usedStones);
            copyTo("rollTimes", rollTimes);
            copyTo("star1out", star1out);
            copyTo("star2out", star2out);
            copyTo("star3out", star3out);
            copyTo("star1outChance", (star1out / total * 100).toFixed(2));
            copyTo("star2outChance", (star2out / total * 100).toFixed(2));
            copyTo("star3outChance", (star3out / total * 100).toFixed(2));
        }

        function getEngName(input) {
            if (input == "チェリノ") { return "Cherino"; }
            if (input == "チェリノ (温泉)") { return "Cherino (温泉)"; }
            if (input == "マリー") { return "Mari"; }
            if (input == "フィーナ") { return "Pina"; }

            let result = input.replaceAll(/ /g, "_")
                .replaceAll(/水着/g, "Swimsuit")
                .replaceAll(/ライディング/g, "Riding")
                .replaceAll(/幼女/g, "Kid")
                .replaceAll(/私服/g, "Casual")
                .replaceAll(/バニーガール/g, "Bunny_Girl")
                .replaceAll(/温泉/g, "Hot_Spring")
                .replaceAll(/正月/g, "New_Year")
                .replaceAll(/応援団/g, "Cheerleader")
                .replaceAll(/クリスマス/g, "Christmas")
                .replaceAll(/メイド/g, "Maid")
                .replaceAll(/体操服/g, "Sportswear")
                .replaceAll(/キャンプ/g, "Camping")
                .replaceAll(/ドレス/g, "Dress")
                .replaceAll(/ガイド/g, "Guide");

            result = result.replaceAll(/キャ/g, "kya") // 坳音
                .replaceAll(/キュ/g, "kyu")
                .replaceAll(/キョ/g, "kyo")
                .replaceAll(/ギャ/g, "gya")
                .replaceAll(/ギュ/g, "gyu")
                .replaceAll(/ギョ/g, "gyo")
                .replaceAll(/シャ/g, "sha")
                .replaceAll(/シュ/g, "shu")
                .replaceAll(/ショ/g, "sho")
                .replaceAll(/ジャ/g, "ja")
                .replaceAll(/ジュ/g, "ju")
                .replaceAll(/ジョ/g, "jo")
                .replaceAll(/チャ/g, "cha")
                .replaceAll(/チュ/g, "chu")
                .replaceAll(/チョ/g, "cho")
                .replaceAll(/ニャ/g, "nya")
                .replaceAll(/ニュ/g, "nyu")
                .replaceAll(/ニョ/g, "nyo")
                .replaceAll(/ヒャ/g, "hya")
                .replaceAll(/ヒュ/g, "hyu")
                .replaceAll(/ヒョ/g, "hyo")
                .replaceAll(/ビャ/g, "bya")
                .replaceAll(/ビュ/g, "byu")
                .replaceAll(/ビョ/g, "byo")
                .replaceAll(/ピャ/g, "pya")
                .replaceAll(/ピュ/g, "pyu")
                .replaceAll(/ピョ/g, "pyo")
                .replaceAll(/ミャ/g, "mya")
                .replaceAll(/ミュ/g, "myu")
                .replaceAll(/ミョ/g, "myo")
                .replaceAll(/リャ/g, "rya")
                .replaceAll(/リュ/g, "ryu")
                .replaceAll(/リョ/g, "ryo")
                .replaceAll(/ア/g, "a") // 五十音
                .replaceAll(/イ/g, "i")
                .replaceAll(/ウ/g, "u")
                .replaceAll(/エ/g, "e")
                .replaceAll(/オ/g, "o")
                .replaceAll(/カ/g, "ka")
                .replaceAll(/キ/g, "ki")
                .replaceAll(/ク/g, "ku")
                .replaceAll(/ケ/g, "ke")
                .replaceAll(/コ/g, "ko")
                .replaceAll(/サ/g, "sa")
                .replaceAll(/シ/g, "shi")
                .replaceAll(/ス/g, "su")
                .replaceAll(/セ/g, "se")
                .replaceAll(/ソ/g, "so")
                .replaceAll(/タ/g, "ta")
                .replaceAll(/チ/g, "chi")
                .replaceAll(/ツ/g, "tsu")
                .replaceAll(/テ/g, "te")
                .replaceAll(/ト/g, "to")
                .replaceAll(/ナ/g, "na")
                .replaceAll(/ニ/g, "ni")
                .replaceAll(/ヌ/g, "nu")
                .replaceAll(/ネ/g, "ne")
                .replaceAll(/ノ/g, "no")
                .replaceAll(/ハ/g, "ha")
                .replaceAll(/ヒ/g, "hi")
                .replaceAll(/フ/g, "fu")
                .replaceAll(/ヘ/g, "he")
                .replaceAll(/ホ/g, "ho")
                .replaceAll(/マ/g, "ma")
                .replaceAll(/ミ/g, "mi")
                .replaceAll(/ム/g, "mu")
                .replaceAll(/メ/g, "me")
                .replaceAll(/モ/g, "mo")
                .replaceAll(/ヤ/g, "ya")
                .replaceAll(/ユ/g, "yu")
                .replaceAll(/ヨ/g, "yo")
                .replaceAll(/ラ/g, "ra")
                .replaceAll(/リ/g, "ri")
                .replaceAll(/ル/g, "ru")
                .replaceAll(/レ/g, "re")
                .replaceAll(/ロ/g, "ro")
                .replaceAll(/ワ/g, "wa")
                .replaceAll(/ヲ/g, "wo")
                .replaceAll(/ン/g, "n")
                .replaceAll(/ガ/g, "ga") // 浊音
                .replaceAll(/ギ/g, "gi")
                .replaceAll(/グ/g, "gu")
                .replaceAll(/ゲ/g, "ge")
                .replaceAll(/ゴ/g, "go")
                .replaceAll(/ザ/g, "za")
                .replaceAll(/ジ/g, "ji")
                .replaceAll(/ズ/g, "zu")
                .replaceAll(/ゼ/g, "ze")
                .replaceAll(/ゾ/g, "zo")
                .replaceAll(/ダ/g, "da")
                .replaceAll(/ヂ/g, "ji")
                .replaceAll(/ヅ/g, "zu")
                .replaceAll(/デ/g, "de")
                .replaceAll(/ド/g, "do")
                .replaceAll(/バ/g, "ba")
                .replaceAll(/ビ/g, "bi")
                .replaceAll(/ブ/g, "bu")
                .replaceAll(/ベ/g, "be")
                .replaceAll(/ボ/g, "bo")
                .replaceAll(/パ/g, "pa")
                .replaceAll(/ピ/g, "pi")
                .replaceAll(/プ/g, "pu")
                .replaceAll(/ペ/g, "pe")
                .replaceAll(/ポ/g, "po");

            return result[0].toUpperCase() + result.slice(1);
        }
    </script>
</div></body>

</html>