<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <title>身份证号校验 - ChiwaInori.top</title>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/css/global.css" />
    <link rel="stylesheet" href="/css/type-normal.css" />
    <style></style>
    <script>
        function button() {
            var number = document.getElementById("ipt").value;
            if (number.toString().length < 17) {
                document.getElementById("button").disabled = true;
                document.getElementById("button").innerHTML = "无效";
            }

            if (number.toString().length >= 17) {
                document.getElementById("button").disabled = false;
            }

            if (number.toString().length == 17) {
                document.getElementById("button").innerHTML = "生成";
            }

            if (number.toString().length == 18) {
                document.getElementById("button").innerHTML = "校验";
            }
        }

        function chk(obj){
            var val = obj.value, num = val.replace(/^(\d{0,17}).*$/,"$1");
            num<17 ? obj.value = num : obj.value = num + val.slice(17,val.length).replace(/^((?:\d|[X])*).*$/,"$1");
        }

        function verify() {
            var number = document.getElementById("ipt").value;

            if (number.toString().length < 17) {
                document.getElementById("result").style = "color: #dd0000;";
                document.getElementById("result").innerHTML = "无效身份证号";
            }

            if (number.toString().length >= 17) {
                var arr = number.split("");
                var in1 = -1; in1 < arr.length; in1++;
                var in1_2 = arr[in1] * 7;
                var in2 = 0; in2 < arr.length; in2++;
                var in2_2 = arr[in2] * 9;
                var in3 = 1; in3 < arr.length; in3++;
                var in3_2 = arr[in3] * 10;
                var in4 = 2; in4 < arr.length; in4++;
                var in4_2 = arr[in4] * 5;
                var in5 = 3; in5 < arr.length; in5++;
                var in5_2 = arr[in5] * 8;
                var in6 = 4; in6 < arr.length; in6++;
                var in6_2 = arr[in6] * 4;
                var in7 = 5; in7 < arr.length; in7++;
                var in7_2 = arr[in7] * 2;
                var in8 = 6; in8 < arr.length; in8++;
                var in8_2 = arr[in8] * 1;
                var in9 = 7; in9 < arr.length; in9++;
                var in9_2 = arr[in9] * 6;
                var in10 = 8; in10 < arr.length; in10++;
                var in10_2 = arr[in10] * 3;
                var in11 = 9; in11 < arr.length; in11++;
                var in11_2 = arr[in11] * 7;
                var in12 = 10; in12 < arr.length; in12++;
                var in12_2 = arr[in12] * 9;
                var in13 = 11; in13 < arr.length; in13++;
                var in13_2 = arr[in13] * 10;
                var in14 = 12; in14 < arr.length; in14++;
                var in14_2 = arr[in14] * 5;
                var in15 = 13; in15 < arr.length; in15++;
                var in15_2 = arr[in15] * 8;
                var in16 = 14; in16 < arr.length; in16++;
                var in16_2 = arr[in16] * 4;
                var in17 = 15; in17 < arr.length; in17++;
                var in17_2 = arr[in17] * 2;
                var int = in1_2 + in2_2 + in3_2 + in4_2 + in5_2 + in6_2 + in7_2 + in8_2 + in9_2 + in10_2 + in11_2 + in12_2 + in13_2 + in14_2 + in15_2 + in16_2 + in17_2;
                var int_c1 = int % 11;
                var int_c2 = 12 - int_c1;
                var int_c3 = int_c2 % 11;
            }

            if (number.toString().length == 17) {
                document.getElementById("result").style = "color: #00dd00;";
                if (int_c3 < 10) {
                    document.getElementById("id").innerHTML = number + "<span style=\"color: #00dd00\">" + int_c3 + "</span>";
                    document.getElementById("result").innerHTML = "该身份证号的最后一位应该是: " + int_c3;
                } else {
                    document.getElementById("id").innerHTML = number + "<span style=\"color: #00dd00\">X</span>";
                    document.getElementById("result").innerHTML = "该身份证号的最后一位应该是: X";
                }
            }

            if (number.toString().length == 18) {
                document.getElementById("id").innerHTML = number;
                var in18 = 16; in18 < arr.length; in18++;
                var in18_2 = arr[in18];
                var x = "X";
                if (arr[in18] == x) {
                    var in18_2 = 10;
                }
                if (int_c3 == in18_2) {
                    document.getElementById("result").style = "color: #00dd00;";
                    document.getElementById("result").innerHTML = "身份证号校验成功";
                } else {
                    document.getElementById("result").style = "color: #dd0000;";
                    document.getElementById("result").innerHTML = "身份证号校验失败";
                }
            }
        }
    </script>
    <script src="/chiwa-functions.js"></script>
</head>

<body><div class="IFB-Green"><p><strong>此页有更新版本</strong></p><p>这表示此页不再被使用. 你应该前往更新页面. 你在一般情况下不应访问到此页.</p><p>通常, 在本页的上一级页面有通往更新页面的链接.</p></div><div id="cw-main">
    <div id="cw-title">
        <h1>身份证号校验</h1>
    </div>
    <div id="cw-nav"></div>
    <div id="cw-content">
        <p>在下面的框中输入要校验的身份证号，然后点击"校验"按钮即可进行校验; 或输入身份证号前17位来生成最后一位。</p>
        <input id="ipt" type="text" maxlength="18" onkeyup="button(), chk(this)" />
        <button id="button" onclick="verify()" disabled="disabled">无效</button>
        <br />
        <br />
        <noscript>
            <p style="color: #ff0000"><strong>您的浏览器不支持或已禁用JavaScript。请启用JavaScript以进行身份证号校验。</strong></p>
            <br /><br />
        </noscript>
        <h3 id="id"></h3>
        <p id="result"></p>
        <script>
            const inputplace = document.querySelector("#ipt");
            inputplace.focus();
            var inputclick = document.getElementById("ipt");
            inputclick.addEventListener("keyup", function(event) {
                event.preventDefault();
                if (event.keyCode == 13) {
                    document.getElementById("button").click();
                }
            });
        </script>
    </div>
</div></body>

</html>